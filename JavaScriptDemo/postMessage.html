<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>postMessage</title>
    <script src="EventUtil.js"></script>
</head>
<body>
<div id="parent"></div>
<input type="text" id="message"><input type="button" value="Send to iframe" id="btn">
<br>
<iframe src="postMessageInner.html" frameborder="1" id="myFrame"></iframe>
</body>
</html>
<script>
    EventUtil.addHandler(window,"message",function (event) {
        var parent=document.getElementById("parent");
        parent.innerHTML="Inner said:"+event.data;
    });

    EventUtil.addHandler(document.getElementById("btn"),"click",function () {
        var message=document.getElementById("message").value,
            innerWindow=document.getElementById("myFrame").contentWindow;
        if(innerWindow.postMessage){
            innerWindow.postMessage(message,"*");
        }else {
            alert("Your browser doesn't support Cross Document Message!" );
        }
    })
</script>